<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Video Upload</title>
    <link rel="stylesheet" type="text/css" href="newVideoCss.css"/>

<script>

    function addVideo3(){
        var setname=document.getElementById('channelname').value;
        var setlocation=document.getElementById('location').value;;
            opener.parent.addChannel(setname, setlocation);
            window.close();
        }

        function getCmaFileView(obj,stype) {
            var s = getCmaFileInfo(obj,stype);
            alert(s);

            document.getElementById('location').value=("img/"+s+".jpg");
        }

        function getCmaFileInfo(obj,stype) {
            var fileObj, pathHeader , pathMiddle, pathEnd, allFilename, fileName, extName;
            if(obj == "[object HTMLInputElement]") {
                fileObj = obj.value
            } else {
                fileObj = document.getElementById(obj).value;
            }
            if (fileObj != "") {
                    pathHeader = fileObj.lastIndexOf("\\");
                    pathMiddle = fileObj.lastIndexOf(".");
                    fileName = fileObj.substring(pathHeader+1, pathMiddle);
                    return fileName; // 순수 파일명만(확장자 제외)
            
            }
        }

</script>
</head>

<body>
    <header>Video Upload</header>
    <hr>
    <div> <span>channelnName : </span> <input type="text" id="channelname"></div>
    <br>
    <input type="file" onchange="getCmaFileView(this,'name')">
    <div> <span>imgLocation : </span> <input type="text" id="location" readonly> </div>
    <br>
    <div>  <input type="button" value="제출하기" id="submit" onclick="addVideo3();"></div>


</body>
</html>